<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>استعلام امتیاز بازاریاب</title>
</head>
<body>
  <h3>استعلام امتیاز بازاریاب</h3>
  <input type="text" id="codeInput" placeholder="کد بازاریابی (۵ رقمی)">
  <button onclick="checkScore()">بررسی</button>
  <p id="result"></p>

  <script>
    async function checkScore() {
      const code = document.getElementById("codeInput").value.trim();
      const resultEl = document.getElementById("result");

      if (!/^\d{5}$/.test(code)) {
        resultEl.textContent = "لطفاً یک کد ۵ رقمی وارد کنید.";
        return;
      }

      resultEl.textContent = "در حال بررسی...";

      try {
        const response = await fetch(`https://script.google.com/macros/s/AKfycbwIvuczZd7yczzDvHH6kv512H-2P93iHS7YdCLRY-gSu1Qmrclm-jSQwjkYQUYOnHmfAA/exec?code=${code}`);
        const data = await response.json();

        if (data.error) {
          resultEl.textContent = data.error;
        } else {
          resultEl.textContent = `نام: ${data.name} | امتیاز: ${data.score}`;
        }
      } catch (error) {
        resultEl.textContent = "خطا در ارتباط با سرور.";
      }
    }
  </script>
</body>
</html>
